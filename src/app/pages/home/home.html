<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <app-nav [activeTab]="activeTab()" [showTabs]="true" (tabChange)="onTabChange($event)" />

    <div class="hero-content text-center relative">
      <app-hero />

      <div class="tab-content-wrapper">

        @if (activeTab() === 'genie')  {
          <div class="tab-pane">
            <app-genie-bar
              [travelForm]="travelForm"
              [isLoading]="isLoading()"
              [canSubmit]="canSubmit()"
              [nlpQuery]="nlpQuery()"
              [currentPlaceholder]="currentPlaceholder()"
              [nextPlaceholder]="nextPlaceholder()"
              [isTransitioning]="isTransitioning()"
              (updateQuery)="updateQuery($event)"
              (generateItinerary)="generateItinerary()"
              (selectSuggestion)="selectSuggestion($event)"
            />
          </div>
        }

        @else if (activeTab() === 'deep') {
          <div class="tab-pane">
            <app-planning-form
              [travelForm]="travelForm"
              [isLoading]="isLoading()"
              [canSubmit]="canSubmit()"
              [budgetRanges]="budgetRanges"
              [travelStyles]="travelStyles"
              [interestOptions]="interestOptions"
              [accommodationTypes]="accommodationTypes"
              [transportationOptions]="transportationOptions"
              (generateItinerary)="generateItinerary()"
              (resetForm)="resetForm()"
              (interestChange)="onInterestChange($event.interest, $event.event)"
            />
          </div>
        }

      </div>
    </div>
  </div>
</section>

<!-- Generated Itinerary Results -->
@if (isLoading()) {
  <app-loading-section [loadingMessage]="loadingMessage()" />
}

@if (generatedItinerary() && !isLoading()) {
  <app-itinerary-results
    [itinerary]="generatedItinerary()"
    [destination]="generatedItinerary()?.destination || travelForm.get('destination')?.value"
    [searchMetadata]="searchMetadata()"
    (printItinerary)="printItinerary()"
  />
}

<!-- Footer -->
<app-footer />
